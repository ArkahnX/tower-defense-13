/*! @source http://purl.eligrey.com/github/classList.js/blob/master/classList.js*/

(function(t,n){function it(e,t){var n;if(Array.isArray(e))for(n=0;n<e.length;n++)t.call(e[n],n);else for(n in e)t.call(e[n],n)}function st(e,t,n,r){return"rgba("+e+","+t+","+n+","+(r||1)+")"}function ot(e,t){s[M]=e,s[_]=t,o.clearRect(0,0,e,t)}function ut(e,t,n,r){var i,s=Object.create(null);for(var o in e)t&&n?(i=t.indexOf(o),i>-1?s[o]=n[i](e,o,r):s[o]=e[o]):s[o]=e[o];return s}function at(e){return e-50<0?0:e-50}function ft(e){return e[v.x][v.y]}function lt(e,t){e.health-=t}function ct(e){return nt[z].round(e)}function ht(e){return nt[z][U](e)}function pt(e,t){return ct(e*h+rt-t)}function dt(e,t){return ct(e*h+rt-t/2)}function vt(e,t){return ht(nt[z].random()*(t-e+1))+e}function mt(){var e=0;for(var t=0;t<N[R];t++)e+=N[t].priority;var n=vt(0,e-1);for(var t=0;t<N[R];t++){if(n<N[t].priority)return t;n-=N[t].priority}return!1}function gt(e,t,n){var r=[];for(var i in e)e[i][t]===n&&r[W](e[i]);return r.length?r:!1}function yt(e,t){var n=e%t;return(e-n)/t}function bt(e,t){return nt[z].random()*(t-e+1)+e}function wt(){s=r[F]("canvas"),s[M]=l*h,s[_]=c*h,o=s.getContext("2d"),b.push(function(e,t){o.drawImage(e.image,dt(e.x,h),dt(e.y,h)),t!==0&&(o.drawImage(t.image,dt(t.x,t.width),pt(t.y,t.height)),Dn(t))}),w.push(function(){kn(),mn(),bn(),It(),_n(),qt(),An(),f++,y--,T[0].length&&f===120?(f=0,Dt()):f===600&&(m++,T.splice(0,1),g=T[0].length,y=g*120+600,f=0)}),x[W](Wt("Base","none","special",0,1e4,1e3,15,25,255,0,0,1)),x[W](Wt("Turret","cannon","basic",5,100,10,10,20,200,0,0,1)),x[W](Wt("Shotgun","spread","basic",2,200,10,10,15,125,0,0,1)),N.push(Et("grass",Q,7,1,xt([[1024,175,230,1.3,1,2],[50,200,245,1,1.3,1.5],[100,125,175,2,1,2]]))),N.push(Et("darkGrass",Q,7,1,xt([[1024,150,205,1.3,1,2],[50,175,220,1,1.3,1.5],[100,100,150,2,1,2]]))),N.push(Et("road","fast",4,.5,xt([[1024,0,0,1,1,1],[600,0,50,1,1,1]]))),N.push(Et("water","slow",3,1.5,xt([[1024,100,200,1.5,1.5,1],[600,100,200,1.5,1.5,1]]))),Mt(5),Pt(30),g=T[0].length,y=g*120+600}function Et(e,t,n,r,i){var u=[];ot(32,32);var a=3;for(var f=0;f<a;f++){var d=vt(i[0].fromColor,i[0].toColor);o.fillStyle=st(ct(d/i[0].redFactor),ct(d/i[0].greenFactor),ct(d/i[0].blueFactor)),o.fillRect(0,0,h,h);for(var v=0;v<i[R];v++)St(i[v]);var m=new Image;m[G]=s[$](),u[W](m),ot(l*h,c*h)}var g=p;return p++,s[M]=l*h,s[_]=c*h,{"name":e,"is":"terrain","type":t,"x":0,"y":0,"image":u,"images":u[R],"priority":n,"id":g,"speed":r}}function St(e){var t,n,r=0,i=0;for(t=0;t<e.pixels;t++)r=vt(0,h-1),i=vt(0,h-1),n=vt(e.fromColor,e.toColor),o.fillStyle=st(ct(n/e.redFactor),ct(n/e.greenFactor),ct(n/e.blueFactor)),o.fillRect(r,i,1,1)}function xt(e){var t=[];for(var n=0;n<e.length;n++)t.push({"pixels":e[n][0],"fromColor":e[n][1],"toColor":e[n][2],"redFactor":e[n][3],"greenFactor":e[n][4],"blueFactor":e[n][5]});return t}function Tt(e,t,n){return e[t][vt(0,e.images-1)]}function Nt(e,t,n){return n[0]}function Ct(e,t,n){return n[1]}function kt(e,t){for(var n=0;n<e;n++){E[n]=E[n]||[],S[n]=S[n]||[];for(var r=0;r<t;r++){var i=mt(),s=ut(N[i],["image","x","y"],[Tt,Nt,Ct],[n,r]);E[n][r]=s,S[n][r]=0}}a=ut(x[0]),a.x=vt(e/2-1,t/2+1),a.y=vt(e/2-1,t/2+1),S[a.x][a.y]=a}function Lt(){var e,t,n,r;for(e=0;e<E[R];e++)for(t=0;t<E[e][R];t++)for(n=0;n<b[R];n++)b[n](E[e][t],S[e][t]);for(r=0;r<w[R];r++)w[r]()}function At(e,t){var r=[];for(var i=0;i<E.length;i++){r[i]=r[i]||[];for(var s=0;s<E[i].length;s++){var o=ut(N[E[i][s].id],["image","x","y"],[Tt,Nt,Ct],[i,s]);S[i][s]&&S[i][s][O].toLowerCase()!=="base"&&(o.speed=0),r[i][s]=o}}return e!==n&&t!==n&&(r[e][t]=ut(N[r[e][t].id],["image","x","y"],[Tt,Nt,Ct],[e,t]),r[e][t].speed=0),r}function Ot(e){var t=[];for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)if(n===0||n===e.length-1||r===0||r===e[n].length-1)if(e[n][r].speed!==0){var i=on.search(e,e[n][r],e[a.x][a.y]);i.length&&t.push(!0)}else t.push(!1);return t}function Mt(e){for(var t=1;t<e+1;t++){var n=t/2,r=7;n*10>r&&(r=n*10),C.push({"level":t,"size":r,"speed":n,"health":n*10,"targetX":null,"targetY":null,"path":null,"x":null,"y":null,"pixelX":null,"pixelY":null,"pathIndex":0,"color":"rgb(0,0,0)"})}}function _t(e){var t,n=0;do{do{var r=0,i=0;if(side===0||side===2)r=vt(0,l-1),side===2&&(i=l-1);else if(side===1||side===3)i=vt(0,c-1),side===1&&(r=c-1);n++;var s=At()}while(s[r][i].speed===0);data.x=r,data.y=i,data.pixelX=dt(r,data.size),data.pixelY=dt(i,data.size),t=Ut([data],s)}while(!t.length);return data.path=t,data.targetX=t[0].x,data.targetY=t[0].y,data.pathIndex=0,e}function Dt(){if(T[0]){var e=T[0].splice(0,1)[0],t,n=0;do{do{var r=vt(0,3),i=0,s=0;if(r===0||r===2)i=vt(0,l-1),r===2&&(s=l-1);else if(r===1||r===3)s=vt(0,c-1),r===1&&(i=c-1);n++;var o=At()}while(o[i][s].speed===0);e.x=i,e.y=s,e.pixelX=dt(i,e.size),e.pixelY=dt(s,e.size),t=Ut([e],o)}while(!t.length);e.path=t,e.targetX=t[0].x,e.targetY=t[0].y,e.pathIndex=0,k.push(e)}}function Pt(e){for(var t=1;t<e+1;t++){var n=[],r=0;for(var i=t;i>0;i--){for(var s=0;s<i*2;s++){var o=ut(C[r]);n.push(o)}r=ct(t/e*(C.length-1))}T.push(n)}}function Ht(e,t,n){return n[0]}function Bt(e,t,n){return n[1]}function jt(e,t,n){return dt(n[0],e.size)}function Ft(e,t,n){return dt(n[1],e.size)}function It(){it(k,function(e){var t=this;t.health<1?Rt(t,e):(o.beginPath(),o.fillStyle=t.color,o.fillRect(t.pixelX,t.pixelY,t.size,t.size),o.fill())})}function qt(){it(k,function(e){var t=this;if(t.pathIndex<t[Q][R]){var n=t[Q][t.pathIndex];t.x=yt(t.pixelX+t.size/2,h),t.y=yt(t.pixelY+t.size/2,h),t.targetX=n.x,t.targetY=n.y;var r=E[t.x][t.y],i=t[tt]/r[tt],s=dt(t.targetX,t.size),o=dt(t.targetY,t.size);ct(t.pixelX)<s?t.pixelX+i>s?t.pixelX=s:t.pixelX+=i:ct(t.pixelY)<o?t.pixelY+i>o?t.pixelY=o:t.pixelY+=i:ct(t.pixelX)>s?t.pixelX-i<s?t.pixelX=s:t.pixelX-=i:ct(t.pixelY)>o&&(t.pixelY-i<o?t.pixelY=o:t.pixelY-=i),ct(t.pixelX)===dt(t.targetX,t.size)&&ct(t.pixelY)===dt(t.targetY,t.size)&&t.pathIndex++}t.x===a.x&&t.y===a.y&&(Gt(t),Rt(t,e))})}function Rt(e,t){var n=e.pixelX,r=e.pixelY,i=e.size/2;On(20,60,[2,7],[-2,2,-2,2],[n,r-i,n+i,r+i],e.color),k.splice(t,1)}function Ut(e,t){var n=[],r,i,s;return it(e,function(e){i=this,s=t||At(),r=on.search(s,s[i.x][i.y],s[a.x][a.y]),n[W](!!r.length)}),n.indexOf(!1)>-1?!1:r}function zt(e){it(e,function(e){var t=this,n=Ut([t]);t.path=n,t.pathIndex=0,t.targetX=n[0].x,t.targetY=n[0].y})}function Wt(e,t,n,r,i,s,o,u,a,f,l,c){var h=Xt(t,o,u,a,f,l,c);return{"is":"tower","name":e,"weapon":t,"width":h.width,"height":h.height,"depth":h.depth,"path":h.path,"color":h.color,"image":Vt(h),"x":h.x,"y":h.y,"type":n,"range":r,"delay":10,"timer":0,"cost":i,"health":s,"fullHealth":s,"from":o,"to":u,"red":a,"blue":l,"green":f,"blue":l,"alpha":c||1}}function Xt(e,t,n,r,i,s,o){var u=vt(t,n),a=vt(t,n)+ct(u/1.5),f=vt(t-3,n-3),l="rectangle";if(e==="beam"||e==="spread")l="triangle",f=0;return{"x":0,"y":0,"width":u,"height":a,"depth":f,"red":r,"blue":s,"green":i,"color":st(r,i,s,o),"path":l}}function Vt(e){var t=s[M],n=s[_];ot(e.width,e.height+e.depth),Jt[e.path](e);var r=new Image;return r[G]=s[$](),ot(t,n),r}function $t(e,t,n,r,i){o.beginPath(),o.rect(e,t,n,r),o.fillStyle=i,o.fill()}function Kt(){if(a!==null)return a;if(a===null){var e=Qt();if(e)return a=S[e.x][e.y],a}return!1}function Qt(){for(var e=0;e<S[R];e++)for(var t=0;t<S[e][R];t++)if(S[e][t][O]==="base")return{"x":e,"y":t};return!1}function Gt(e){lt(a,e.health);if(a.health<1){Yt(a.x,a.y),a=null;var t=Kt();t||gameOver()}}function Yt(e,t){var n=S[e][t],r=dt(t,h),i=r-n.height/2,s=r+n.height,o=dt(e,h),u=o+rt-n.width/2,a=o+n.width;On(20,50,[2,7],[-2,2,-2,2],[u,i,a,s],[n.red,n.green,n.blue],!0),S[e][t]=0}function Zt(e,t){var n=S[e][t];Tn(n.cost*(n.health/n.fullHealth)/2),Yt(e,t)}function en(){var e=nn().cost;d=null,Tn(e)}function tn(){return nn()?!0:!1}function nn(){return d===J?!1:gt(x,O,d)[0]}function rn(){if(ft(S)!==0)return J;if(!tn())return!0;var e=At(v.x,v.y);if(Ot(e).indexOf(!0)===-1)return!1;if(k[R]){var t=gt(k,"x",v.x);if(gt(t,"y",v.y)[R])return!1;var t=gt(k,"targetX",v.x);if(gt(t,"targetY",v.y)[R])return!1;var e=At(v.x,v.y);if(!Ut(k,e))return!1}return nn().is==="terrain"?!0:ft(E).type===Q?!0:nn().is==="trap"&&ft(E).type==="fast"?!0:!1}function sn(){r[F](K).children[R]>0&&(r[F](K)[j]="");var e=[];for(var t=0;t<x[R];t++){var n=x[t],i=D+">"+n[O]+B,s=D+" class='cost'>$"+n.cost+B,o="<img src='"+n.image.src+"'>",u=P+" class='container' title='"+n.is+": "+n[O]+" ($"+n.cost+")"+"'>"+o+i+s+H;e.push(""+u+"")}r[F](K)[j]=e.join(""),cn()}function un(e){this.content=[],this.scoreFunction=e}function an(){fn(),u=requestAnimationFrame(an)}function fn(){ot(l*h,c*h),Lt()}function ln(){r[F]("loading")[V].add("hidden")}function cn(){var e=r[q](".container");for(var t=0;t<e[R];t++)gn(e[t],"click",pn)}function hn(e){e.preventDefault()}function pn(e){hn(e);var t=this;!t[V].contains("expensive")&&!tn()&&(d=t[I]("span").innerText,Nn(gt(x,O,d)[0].cost))}function dn(e){hn(e);if(tn()&&rn())if(e.which===2)en();else{var t=ut(nn(),["x","y"],[Nt,Ct],[v.x,v.y]);S[v.x][v.y]=t,d=null,Cn(),k.length&&zt(k)}rn()===null&&e.which===2&&(a.x!==v.x||a.y!==v.y)&&Zt(v.x,v.y)}function vn(e){v.x=e.pageX-s.offsetLeft,v.y=e.pageY-s.offsetTop,v.x=yt(v.x,h),v.y=yt(v.y,h)}function mn(){strokeColor="black",rn()&&tn()?strokeColor="green":rn()===J?strokeColor="blue":rn()||(strokeColor="red")}function gn(e,t,n){yn(e,t,n),e.addEventListener(t,n,!0)}function yn(e,t,n){e.removeEventListener(t,n)}function bn(){var e=v.x*32,t=v.y*32;o.strokeStyle=strokeColor,o.lineWidth=2,o.strokeRect(e,t,32,32),o.strokeStyle="#FFF",o.strokeRect(e-2,t-2,36,36)}function wn(){for(i=0;i<C[R];i++){var t=C[i];for(e=0;e<t.path.length;e++){var n=t.path[e];o.beginPath(),o.fillStyle="rgba(100,100,100,0.5)",o.fillRect(n.x*h,n.y*h,h,h),o.fill()}}}function En(){for(i=0;i<C[R];i++){var t=C[i],n=At(v.x,v.y),r=getBaseCoords(),s=on.search(n,n[t.x][t.y],n[r.x][r.y]);for(e=0;e<s.length;e++){var u=s[e];o.beginPath(),o.fillStyle="rgba(0,255,0,0.5)",o.fillRect(u.x*h,u.y*h,h,h),o.fill()}}}function Sn(){cancelAnimationFrame(u)}function Tn(e){xn+=e,Cn()}function Nn(e){xn-=e,Cn()}function Cn(){var e=r[q](".container");for(var t=0;t<e[R];t++){e[t][V].remove("expensive"),e[t][V].remove("building");var n=e[t][I](".cost").innerText.substring(1);parseInt(n,10)>xn&&e[t][V].add("expensive"),nn()&&e[t][V].add("building")}}function kn(){var e=Kt().health,t="<li>",n="</li>",i="<code>",s="</code>",o=[];o[W]("Base Health: "+i+e+s),o[W]("Wave: "+i+m+s),o[W]("Enemies: "+i+g+s),o[W]("Enemies Remaining: "+i+(T[0].length+k.length)+s),o[W]("Time until Next Wave: "+i+y+s),o[W]("money: "+i+xn+s),r[F]("data")[j]="<ul>"+t+o.join(n+t)+n+"</ul>"}function Ln(e,t,n,r,i,s,o,u,a,f,l,c,p,d,v){var m=i/3,g=h/60*vt(i+m,i-m);return{"x":vt(e,n),"y":vt(t,r),"w":vt(s,o),"h":vt(s,o),"dx":bt(u,a),"dy":bt(f,l),"life":g,"lifespan":g,"red":c,"green":p,"blue":d,"alpha":v}}function An(){for(var e=0;e<L.length;e++){var t=L[e];o.beginPath(),o.fillStyle="rgba("+t.red+","+t.green+","+t.blue+","+1+")",o.fillRect(t.x,t.y,t.w,t.h),o.fill(),t.life=t.life-1,t.life>0?(t.x=t.x+t.dx,t.y=t.y+t.dy):L.splice(e,1)}}function On(e,t,n,r,i,s){for(var o=0;o<e;o++)L.push(Ln(i[0],i[1],i[2],i[3],t,n[0],n[1],r[0],r[1],r[2],r[3],s[0],s[1],s[2]))}function Mn(e){var t=0,n=e.length;waitForParticles}function _n(){for(var e=0;e<A.length;e++){var t=A[e];if(t.x+t.radius*2>s.width||t.y+t.radius*2>s.height||t.x<0||t.y<0)A.splice(e,1);else{var n=Bn(t);if(n)A.splice(e,1),lt(n,1);else{o.beginPath(),o.fillStyle="rgba("+t.red+","+t.green+","+t.blue+","+t.life/t.maxLife+")",o.arc(t.x,t.y,t.radius,0,2*Math.PI,!1),o.fill();if(t.life>0||t.life<0)t.x+=t.dx,t.y+=t.dy,t.life=t.life-1;t.life===0&&A.splice(e,1)}}}}function Dn(e){e.timer>=e.delay&&it(k,function(t){var n=this,r=dt(e.x,1),i=dt(e.y,1),s=e.range*h;if(Pn(r,i,s,n.pixelX,n.pixelY,n.size/2)&&e.timer>=e.delay){var o=r-n.pixelX,u=i-n.pixelY;Hn(500,3,r,i,yt(o,Math.abs(o)),yt(u,Math.abs(u)),255,255,255,1),e.timer=0}}),e.timer++}function Pn(e,t,n,r,i,s){var o=e-r,u=t-i,a=n+s;return o*o+u*u<=a*a}function Hn(e,t,n,r,i,s,o,u,a,f){A.push({"radius":t,"x":n,"y":r,"dx":i,"dy":s,"red":o,"green":u,"blue":a,"alpha":f,"life":e,"maxLife":e})}function Bn(e){for(var t=0;t<k.length;t++){var n=k[t];if(Pn(n.pixelX,n.pixelY,n.size/2,e.x,e.y,e.radius))return n}return!1}var r=t.document,s,o,u=null,a=null,f=0,l=20,c=20,h=32,p=0,d=null,v={"x":0,"y":0},m=1,g=0,y=0,b=[],w=[],E=[],S=[],x=[],T=[],N=[],x=[],C=[],k=[],L=[],A=[],O="name",M="width",_="height",D="<span",P="<div",H="</div>",B="</span>",j="innerHTML",F="getElementById",I="querySelector",q=I+"All",R="length",U="floor",z="Math",W="push",X="rgb(",V="classList",$="toDataURL",J=null,K="towers",Q="path",G="src",Y="cost",Z="next",et="color",tt="speed",nt=t,rt=h/2;nt.addEventListener("DOMContentLoaded",function(){wt(),sn(),kt(l,c),Tn(500),gn(s,"mousemove",vn),gn(s,"mousedown",dn),gn(s,"contextmenu",hn),an(),ln()});var Jt={"triangle":function(t){o.beginPath(),o.moveTo(t.x+t.width/2,t.y+t.depth),o.lineTo(t.x+t.width,t.y+t.height),o.lineTo(t.x+t.depth,t.y+t.height),o.closePath(),o.fillStyle=t.color,o.fill()},"rectangle":function(t){$t(t.x,t.y+t.depth/2,t.width,t.height,t.color),$t(t.x,t.y,t.width,t.depth,st(at(t.red),at(t.green),at(t.blue)))}},on={"init":function(e){for(var t=0,n=e[R];t<n;t++)for(var r=0,i=e[t][R];r<i;r++){var s=e[t][r];s.f=0,s.g=0,s.h=0,s[Y]=s[tt],s.visited=!1,s.closed=!1,s.parent=J}},"heap":function(){return new un(function(e){return e.f})},"search":function(e,t,n){on.init(e),heuristic=on.manhattan;var r=on.heap();r[W](t);while(r.size()>0){var i=r.pop();if(i===n){var s=i,o=[];while(s.parent)o[W](s),s=s.parent;return o.reverse()}i.closed=!0;var u=on.neighbors(e,i);for(var a=0,f=u[R];a<f;a++){var l=u[a];if(l.closed||l[tt]===0)continue;var c=i.g+l[Y],h=l.visited;if(!h||c<l.g)l.visited=!0,l.parent=i,l.h=l.h||heuristic(l.x,l.y,n.x,n.y),l.g=c,l.f=l.g+l.h,h?r.rescoreElement(l):r[W](l)}}return[]},"manhattan":function(e,t,n,r){var i=nt[z].abs(n-e),s=nt[z].abs(r-t);return i+s},"neighbors":function(e,t){var n=[],r=t.x,i=t.y;return e[r-1]&&e[r-1][i]&&n[W](e[r-1][i]),e[r+1]&&e[r+1][i]&&n[W](e[r+1][i]),e[r]&&e[r][i-1]&&n[W](e[r][i-1]),e[r]&&e[r][i+1]&&n[W](e[r][i+1]),n}};un.prototype={"push":function(e){this.content[W](e),this.sinkDown(this.content[R]-1)},"pop":function(){var e=this.content[0],t=this.content.pop();return this.content[R]>0&&(this.content[0]=t,this.bubbleUp(0)),e},"size":function(){return this.content[R]},"rescoreElement":function(e){this.sinkDown(this.content.indexOf(e))},"sinkDown":function(e){var t=this.content[e];while(e>0){var n=(e+1>>1)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},"bubbleUp":function(e){var t=this.content[R],n=this.content[e],r=this.scoreFunction(n);for(;;){var i=e+1<<1,s=i-1,o=J;if(s<t){var u=this.content[s],a=this.scoreFunction(u);a<r&&(o=s)}if(i<t){var f=this.content[i],l=this.scoreFunction(f);l<(o===J?r:a)&&(o=i)}if(o===J)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}};var xn=0;(function(){var e=0,t=["ms","moz","webkit","o"];for(var n=0;n<t[R]&&!nt.requestAnimationFrame;++n)nt.requestAnimationFrame=nt[t[n]+"RequestAnimationFrame"],nt.cancelAnimationFrame=nt[t[n]+"CancelAnimationFrame"]||nt[t[n]+"CancelRequestAnimationFrame"];nt.requestAnimationFrame||(nt.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=nt[z].max(0,16-(r-e)),s=nt.setTimeout(function(){t(r+i)},i);return e=r+i,s}),nt.cancelAnimationFrame||(nt.cancelAnimationFrame=function(e){clearTimeout(e)})})(),typeof r!="undefined"&&!("classList"in r.createElement("a"))&&function(e){"use strict";var t="classList",n="prototype",r=(e.HTMLElement||e.Element)[n],i=Object,s=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(t in this&&this[t]===e)return t;return-1},u=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},a=function(e,t){if(t==="")throw new u("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new u("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(e,t)},f=function(e){var t=s.call(e.className),n=t?t.split(/\s+/):[],r=0,i=n.length;for(;r<i;r++)this.push(n[r]);this._updateClassName=function(){e.className=this.toString()}},l=f[n]=[],c=function(){return new f(this)};u[n]=Error[n],l.item=function(e){return this[e]||null},l.contains=function(e){return e+="",a(this,e)!==-1},l.add=function(e){e+="",a(this,e)===-1&&(this.push(e),this._updateClassName())},l.remove=function(e){e+="";var t=a(this,e);t!==-1&&(this.splice(t,1),this._updateClassName())},l.toggle=function(e){e+="",a(this,e)===-1?this.add(e):this.remove(e)},l.toString=function(){return this.join(" ")};if(i.defineProperty){var h={"get":c,"enumerable":!0,"configurable":!0};try{i.defineProperty(r,t,h)}catch(p){p.number===-2146823252&&(h.enumerable=!1,i.defineProperty(r,t,h))}}else i[n].__defineGetter__&&r.__defineGetter__(t,c)}(self)})(window)